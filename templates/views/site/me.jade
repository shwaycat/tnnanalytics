extends ../../layouts/default


block content
  .container
    .row
      .col-xs-4.col-xs-offset-4
        .panel.panel-default.centered
          .hdr-dashboard.panel-heading
            | Hi #{user.name.first}, these are your settings
          .panel-body
              p #{credentials}
            form(method='post', autocomplete='off', novalidate).me
              input(type='hidden', name='action', value='profile.details')
              input(type='hidden', name=csrf_token_key, value=csrf_token_value)
              .form-group(class=validationErrors.name ? 'has-error' : null)
                input(type='text', name='name.first', value=user.name.first, placeholder='First Name').form-control
              .form-group(class=validationErrors.name ? 'has-error' : null)
                input(type='text', name='name.last', value=user.name.last, placeholder='Last Name').form-control
              .form-group(class=validationErrors.email ? 'has-error' : null)
                input(type='email', name='email', value=user.email, placeholder='Email').form-control
              .form-group
                textarea(name='notifications.keywords', rows=3, placeholder='comma, separated, list, of, keywords').form-control=user.notifications.keywords
              if !user.services.twitter.isConfigured
                .form-group
                  label.col-sm-2.control-label Twitter
                  a(href='/auth/twitter', title='Connect your Twitter account').btn.btn-twitter
                    span.entypo-social.entypo-twitter
                    |  Connect your Twitter account
              if !user.services.facebook.isConfigured
                  .form-group
                      label.col-sm-2.control-label Facebook
                      a(href='/auth/facebook', title='Connect your Facebook account').btn.btn-facebook
                          span.entypo-social.entypo-facebook
                          |  Connect your Facebook account
              //if !user.services.google.isConfigured
              //  .form-group
              //    label.col-sm-2.control-label Google
              //    .col-sm-10
              //      a(href='/auth/google', title='Connect your Google account').btn.btn-google
              //        span.entypo-social.entypo-google-circles
              //        |  Connect your Google account

              // user.services.google.isConfigured
              // if user.services.twitter.isConfigured || user.services.facebook.isConfigured
              //   hr.line-dashed
              if user.services.twitter.isConfigured
                .form-group
                  label.col-sm-2.control-label Twitter
                  .col-sm-10.text-muted.faux-label
                    span.entypo-social.entypo-twitter
                    |  Your account is connected.
                    a(href='?disconnect=twitter', title='Revoke authorization of your Twitter account')  Disconnect
              //if user.services.google.isConfigured
              //  .form-group
              //    label.col-sm-2.control-label Google
              //    .col-sm-10.text-muted.faux-label
              //      span.entypo-social.entypo-google-circles
              //      |  Your account is connected.
              //      a(href='?disconnect=google', title='Revoke authorization of your Google account')  Disconnect
              if user.services.facebook.isConfigured
                .form-group
                  label.col-sm-2.control-label Facebook
                  .col-sm-10.text-muted.faux-label
                    span.entypo-social.entypo-facebook
                    |  Your account is connected.
                    a(href='?disconnect=facebook', title='Revoke authorization of your Facebook account')  Disconnect
              .form-actions.text-center
                button(type='submit', data-loading-text="Saving...").btn.btn-primary Save profile
    .row
      .col-xs-4.col-xs-offset-4
        .panel.panel-default.centered
          .hdr-dashboard.panel-heading
            Change Password
          .panel-body.ui-reveal
            .ui-reveal__initial
              button(type='button').btn.btn-link.ui-reveal__trigger Change Password
            .ui-reveal__hidden
              form(method='post', autocomplete='off').me
                input(type='hidden', name='action', value='profile.password')
                input(type='hidden', name=csrf_token_key, value=csrf_token_value)
                .form-group
                  label(for='change-passwordNew').sr-only New Password
                  input(type='password', name='password', placeholder='New Password', id='change-passwordNew').form-control
                .form-group
                  label(for='change-passwordConfirm').sr-only Confirm Password
                  input(type='password', name='password_confirm', placeholder='Confirm Password', id='signin-passwordConfirm').form-control
                .form-group
                  button(type='submit', data-loading-text="Changing...").btn.btn-primary Change

block js
  script.
    $(function() {

      $('.ui-reveal__trigger').click( function() {
        container = $(this).closest('.ui-reveal');
        container.addClass('is-revealed');
        container.find('input[type!=hidden],textarea').eq(0).click().focus();
      });

      $('.ui-reveal__hide').click( function() {
        container = $(this).closest('.ui-reveal');
        container.removeClass('is-revealed');
        });
    });
